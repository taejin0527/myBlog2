---
title: (PYTHON) Day - 23 Regex and Parsing(3)
date: 2020-03-14 22:59:46
categories:
  - LANGUAGE ğŸš€
  - PYTHON
  - HACKERRANK
tags: [íŒŒì´ì¬, programming language, python, language]
subtitle: ê¸°ì´ˆë¥¼ íƒ„íƒ„íˆ!
---

# Reference

- ë¬¸ì œ ì¶œì²˜ - [HackerRank](https://www.hackerrank.com/dashboard)
- íŒŒì´ì¬ ì—°ìŠµ - [Practice - Python](https://www.hackerrank.com/domains/python?filters%5Bstatus%5D%5B%5D=unsolved&badge_type=python)

ê°œì¸ì ì¸ ìƒê°ê³¼ ìƒìƒìœ¼ë¡œ ì‘ì„±í•œ ë‚´ìš©ë“¤ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤
ë¬¸ì œë¥¼ í’€ê³  {% label success@ Discussion Tab %}ì„ ì°¸ê³ í•˜ë©° ì½”ë“œ ìŠ¤íƒ€ì¼ì„ ê°œì„ í•˜ë ¤ê³  ë…¸ë ¥í•˜ê³ ì í•©ë‹ˆë‹¤

---

# HackerRank

{% spoiler "HackerRankì˜ Python ì—°ìŠµë¬¸ì œë“¤ì€ ì•„ë˜ì™€ ê°™ì€ ì¹´í…Œê³ ë¦¬ë¡œ ë¶„ë¥˜ ëœë‹¤" %}

## Subdomain

    - ~~Introduction~~
    - ~~Basic Data Types~~
    - ~~Strings~~
    - ~~Sets~~
    - ~~Math~~
    - ~~Itertools~~
    - ~~Collections~~
    - ~~Date and Time~~
    - ~~Errors and Exceptions~~
    - ~~Classes~~
    - ~~Built-Ins~~
    - ~~Python Functionals~~
    - <strong style="color:blue">Regex and Parsing</strong>
    - XML
    - Closures and Decorators
    - Numpy
    - Debugging

{% endspoiler %}

---

# Regex and Parsing

{% note no-icon %}
{% note primary no-icon %}

## Problem

- [Hex Color Code](#Hex-Color-Code)
- [HTML Parser - Part 1](#HTML-Parser-Part-1)
- [HTML Parser - Part 2](#HTML-Parser-Part-2)
- [Detect HTML Tags, Attributes and Attribute Values](#Detect-HTML-Tags-Attributes-and-Attribute-Values)
- [Validating UID](#Validating-UID)
- [Validating Credit Card Numbers](#Validating-Credit-Card-Numbers)
- [Validating Postal Codes](#Validating-Postal-Codes)
- [Matrix Script](#Matrix-Script)  
  {% endnote %}

---

## Hex Color Code

</br>

{% note info %}
ë¬¸ì œ : CSS ì½”ë“œì—ì„œ HEX color codeë¥¼ ì°¾ëŠ” ë¬¸ì œ
ì…ë ¥ : ì½”ë“œì¤„ ìˆ˜ N; (N ë°˜ë³µ) CSS ì½”ë“œ
ì¶œë ¥ : HEX color code
{% endnote %}

{% tabs example2, -1 %}

  <!-- tab INPUT @code -->

{% code input %}
11
#BED
{
color: #FfFdF8; background-color:#aef;
font-size: 123px;
background: -webkit-linear-gradient(top, #f9f9f9, #fff);
}
#Cab
{
background-color: #ABC;
border: 2px dashed #fff;
} {% endcode %}

  <!-- endtab -->

  <!-- tab OUTPUT @code -->

{% code output %}
#FfFdF8
#aef
#f9f9f9
#fff
#ABC
#fff {% endcode %}

  <!-- endtab -->

{% endtabs %}

{% note success no-icon %}
{% code lang:python %}
import re

for \_ in range(int(input())):
HEX = re.findall(r".(#[0-9A-Fa-f]{6}|#[0-9A-Fa-f]{3})", input())
if HEX:
print(\*HEX, sep='\n') {% endcode %}
{% endnote %}

---

## HTML Parser - Part 1

</br>

{% note info %}
ë¬¸ì œ : html ë¬¸ì„œë¥¼ íƒœê·¸ë³„ë¡œ êµ¬ë¶„í•˜ëŠ” ë¬¸ì œ
{% endnote %}

{% tabs example3, -1 %}

  <!-- tab INPUT @code -->

{% code input %}
2

  <html><head><title>HTML Parser - I</title></head>
  <body data-modal-target class='1'><h1>HackerRank</h1><br /></body></html> {% endcode %}
  <!-- endtab -->

  <!-- tab OUTPUT @code -->

{% code output %}
Start : html
Start : head
Start : title
End : title
End : head
Start : body
-> data-modal-target > None
-> class > 1
Start : h1
End : h1
Empty : br
End : body
End : html {% endcode %}

  <!-- endtab -->

{% endtabs %}

{% note success no-icon %}
end íƒœê·¸ ì¶œë ¥ë¬¸ì—ì„œ ê³µë°±ì´ 3ê°œ ìˆì–´ì•¼í•œë‹¤...
{% code lang:python %}
from html.parser import HTMLParser

class MyHTMLParser(HTMLParser):
def handle_starttag(self, tag, attrs):
print("Start :", tag)
for e in attrs:
print ('->',e[0],'>',e[1])

      def handle_endtag(self, tag):
          print("End   :", tag)

      def handle_startendtag(self, tag, attrs):
          print("Empty :", tag)
          for e in attrs:
              print ('->',e[0],'>',e[1])

parser = MyHTMLParser()
parser.feed(''.join([input() for _ in range(int(input()))])) {% endcode %}
{% endnote %}

---

## HTML Parser - Part 2

</br>

{% note info %}
ë¬¸ì œ : ì£¼ì„ê³¼ ë°ì´í„°ë¥¼ êµ¬ë¶„í•˜ëŠ” ë¬¸ì œ
{% endnote %}

{% tabs example4, -1 %}

  <!-- tab INPUT @code -->

{% code input %}
4

  <!--[if IE 9]>IE9-specific content
  <![endif]-->
  <div> Welcome to HackerRank</div>
  <!--[if IE 9]>IE9-specific content<![endif]-->  {% endcode %}
  <!-- endtab -->

  <!-- tab OUTPUT @code -->

{% code output %}

> > > Multi-line Comment
> > > [if IE 9]>IE9-specific content
> > > <![endif]
> > > Data
> > > Welcome to HackerRank
> > > Single-line Comment
> > > [if IE 9]>IE9-specific content<![endif] {% endcode %}

  <!-- endtab -->

{% endtabs %}

{% note success no-icon %}
handle_comment ì™€ handle_data ë¥¼ ì •ì˜í•˜ëŠ” ë¬¸ì œ
{% code lang:python %}
from html.parser import HTMLParser

class MyHTMLParser(HTMLParser):
def handle_comment(self,data):
if '\n' in data:
print('>>> Multi-line Comment')
print(data)
else:
print('>>> Single-line Comment')
print(data)

      def handle_data(self,data):
          if data!='\n':
              print('>>> Data')
              print(data)

html = ""  
 for i in range(int(input())):
html += input().rstrip()
html += '\n'

parser = MyHTMLParser()
parser.feed(html)
parser.close() {% endcode %}
{% endnote %}

---

## Detect HTML Tags, Attributes and Attribute Values

</br>

{% note info %}
ë¬¸ì œ : íƒœê·¸, ì†ì„±, ì†ì„±ê°’ì„ êµ¬ë¶„í•˜ëŠ” ë¬¸ì œ
{% endnote %}

{% tabs example5, -1 %}

  <!-- tab INPUT @code -->

{% code input %}
9

  <head>
  <title>HTML</title>
  </head>
  <object type="application/x-flash"
    data="your-file.swf"
    width="0" height="0">
    <!-- <param name="movie" value="your-file.swf" /> -->
    <param name="quality" value="high"/>
  </object> {% endcode %}
  <!-- endtab -->

  <!-- tab OUTPUT @code -->

{% code output %}
head
title
object
-> type > application/x-flash
-> data > your-file.swf
-> width > 0
-> height > 0
param
-> name > quality
-> value > high {% endcode %}

  <!-- endtab -->

{% endtabs %}

{% note success no-icon %}
{% code lang:python %}
from html.parser import HTMLParser

class MyHTMLParser(HTMLParser):
def handle_starttag(self, tag, attrs):
print(tag)
[print('-> {} > {}'.format(*attr)) for attr in attrs]

html = '\n'.join([input() for _ in range(int(input()))])
parser = MyHTMLParser()
parser.feed(html)
parser.close() {% endcode %}

ì •ê·œì‹ë§Œ ì‚¬ìš©í•œ ë‹µì•ˆ
{% code lang:python %}
import re

text = ''
for \_ in range(int(input())):
text = re.sub(r'<!.+-->',r' ',(text+input()))

for er in re.findall(r'<([^/][^>]_)>', text):
if ' ' in er:  
 for ere in re.findall(r'([a-z]+)? _([a-z-]+)="([^"]+)', er):
if ere[0]:
print(ere[0])  
 print('-> '+ere[1]+' > '+ere[2])
else:
print(er) {% endcode %}
{% endnote %}

---

## Validating UID

</br>

{% note info %}
ë¬¸ì œ : unique identification number(UID)ë¥¼ êµ¬ë³„í•˜ëŠ” ë¬¸ì œ
ì¡°ê±´ : ì˜ìˆ«ì ë²”ìœ„(a-z, A-Z, 0-9) ì‚¬ì´ì—ì„œ ìµœì†Œ 2ê°œì˜ ëŒ€ë¬¸ì, ìµœì†Œ 3ê°œì˜ ìˆ«ìë¥¼ ë°˜ë³µì—†ì´ í¬í•¨í•´ì•¼í•˜ê³  ì´ ê¸¸ì´ëŠ” 10ì´ë‹¤
ì˜ˆì œ : B1CD102354 ì—ì„œëŠ” 1ì´ ì¤‘ë³µëœë‹¤ -> Invalid
{% endnote %}

{% tabs example6, -1 %}

  <!-- tab INPUT @code -->

{% code input %}
2
B1CD102354
B1CDEF2354 {% endcode %}

  <!-- endtab -->

  <!-- tab OUTPUT @code -->

{% code output %}
Invalid
Valid {% endcode %}

  <!-- endtab -->

{% endtabs %}

{% note success no-icon %}
ë§¤ìš° ê¹”ë”í•˜ê³  ì¢‹ì€ ê²ƒ ê°™ë‹¤. `all()` í•¨ìˆ˜ì˜ ì‚¬ìš©ì— ìµìˆ™í•´ì§€ì.
íŠ¹íˆ ë¬¸ìì˜ ë°˜ë³µì„ í™•ì¸í•˜ëŠ” ì •ê·œí‘œí˜„ì‹ì„ ì˜ ê¸°ì–µí•˜ì
`(?!íŒ¨í„´)` : ë¶€ì •ì  ë’¤ë³´ê¸° ì„ ì–¸. ì´í›„ì— ë‚˜ì˜¬ ë¬¸ìë“¤ì´ 'íŒ¨í„´'ì— ë§¤ì¹˜ë˜ì–´ì„œëŠ” ì•ˆ ëœë‹¤.
`ì°¸ì¡° : \n` : ì˜ˆë¥¼ ë“¤ì–´ ì‘ì€ ë”°ì˜´í‘œë‚˜ í° ë”°ì˜´í‘œ ë‚´ì— í•œ ê°œ ì´ìƒì˜ ë¬¸ìê°€ ìˆëŠ” í‘œí˜„ì‹ì¸ `r'['"][^'"]*['"]'`ê°€ ìˆì„ ë•Œ, ì‹œì‘í•˜ëŠ” ë”°ì˜´í‘œì™€ ëë‚˜ëŠ” ë”°ì˜´í‘œê°€ ë˜‘ê°™ê²Œ ë§Œë“¤ë ¤ë©´ `r'(['"])[^'"]*\1'` ì´ë ‡ê²Œ í‘œí˜„í•˜ë©´ ëœë‹¤. ì—¬ê¸°ì„œ \1ì€ ì²«ë²ˆì§¸ ê´„í˜¸ì¸ (['"])ì´ ë§¤ì¹˜ë˜ëŠ” ê²ƒê³¼ ê°™ë‹¤.

{% code lang:python %}
import re

no_repeats = r"(?!._(.)._\1)"
two_or_more_upper = r"(._[A-Z]){2,}"
three_or_more_digits = r"(._\d){3,}"
ten_alphanumerics = r"[a-zA-Z0-9]{10}"
filters = no_repeats, two_or_more_upper, three_or_more_digits, ten_alphanumerics

for uid in [input() for _ in range(int(input()))]:
if all(re.match(f, uid) for f in filters):
print("Valid")
else:
print("Invalid") {% endcode %}

`assert` ì¡°ê±´ì‹ì€ ì²˜ìŒë´¤ëŠ”ë° ë‹¤ìŒì— ìì„¸íˆ ì‚´í´ë´ì•¼ê² ë‹¤. ìš°ì„  ì •ë ¬ì‹œí‚¤ê³  ì¡°ê±´ì„ í™•ì¸í•˜ëŠ” ê²ƒì´ ì¸ìƒì ì´ì˜€ë‹¤
{% code lang:python %}
import re

for \_ in range(int(input())):
u = ''.join(sorted(input()))
try:
assert re.search(r'[A-Z]{2}', u)
assert re.search(r'\d\d\d', u)
assert not re.search(r'[^a-za-z0-9]', u)
assert not re.search(r'(.)\1', u)
assert len(u) == 10
except:
print('Invalid')
else:
print('Valid') {% endcode %}
{% endnote %}

---

## Validating Credit Card Numbers

</br>

{% note info %}
ë¬¸ì œ : ì‹ ìš©ì¹´ë“œ ë²ˆí˜¸ì˜ ìœ íš¨ì„±ì„ í™•ì¸í•˜ëŠ” ë¬¸ì œ
ì¡°ê±´ :
4, 5, 6 ì¤‘ í•˜ë‚˜ë¡œ ì‹œì‘í•´ì•¼í•œë‹¤
ì´ 16ìë¦¬ì´ë‹¤
0-9 ì‚¬ì´ì˜ ìˆ«ìë¡œ ì´ë£¨ì–´ì ¸ìˆë‹¤
`-` ë¡œ 4ìë¦¬ì”© êµ¬ë¶„ë˜ì–´ ìˆë‹¤
` `, `_` ì™€ ê°™ì€ ë‹¤ë¥¸ êµ¬ë¶„ìë¥¼ ì‚¬ìš©í•´ì„œëŠ” ì•ˆëœë‹¤
ìˆ«ìê°€ ì—°ì†ìœ¼ë¡œ 4ë²ˆ ë°˜ë³µí•˜ë©´ ì•ˆëœë‹¤
{% endnote %}

{% tabs example7, -1 %}

  <!-- tab INPUT @code -->

{% code input %}
6
4123456789123456
5123-4567-8912-3456
61234-567-8912-3456
4123356789123456
5133-3367-8912-3456
5123 - 3567 - 8912 - 3456 {% endcode %}

  <!-- endtab -->

  <!-- tab OUTPUT @code -->

{% code output %}
Valid # 4123456789123456
Valid # 5123-4567-8912-3456
Invalid # 61234-567-8912-3456 <- 567ì´ 3ìë¦¬ì´ë‹¤
Valid # 4123356789123456
Invalid # 5133-3367-8912-3456 <- 33-33 ë°˜ë³µì´ë‹¤
Invalid # 5123 - 3567 - 8912 - 3456 <- êµ¬ë¶„ìë¡œ ê³µë°±ì´ í¬í•¨ë˜ì–´ ìˆë‹¤ {% endcode %}

  <!-- endtab -->

{% endtabs %}

{% note success no-icon %}
{% code lang:python %}
import re

def validate_credit_cards(credit_cards):
valid_structure = r"[456]\d{3}(-?\d{4}){3}$"
no_four_repeats = r"((\d)-?(?!(-?\2){3})){16}"
filters = valid_structure, no_four_repeats

      if all(re.match(f, credit_cards) for f in filters):
          print("Valid")
      else:
          print("Invalid")

for \_ in range(int(input())):
credit = input()
validate_credit_cards(credit) {% endcode %}

ì •ê·œì‹ì„ ì—¬ëŸ¬ì¤„ì— ê±¸ì³ì„œ ì‘ì„±í•  ìˆ˜ë„ ìˆìŒì„ ì•Œê²Œ ë˜ì—ˆë‹¤
{% code lang:python %}
import re
pattern = re.compile(r"^"
r"(?!.\*(\d)(-?\1){3})"
r"[456]"
r"\d{3}"
r"(?:-?\d{4}){3}"
r"$")
for \_ in range(int(input().strip())):
print("Valid" if pattern.search(input().strip()) else "Invalid") {% endcode %}
{% endnote %}

---

## Validating Postal Codes

</br>

{% note info %}
ë¬¸ì œ : ìœ íš¨í•œ ìš°í¸ë²ˆí˜¸(postal code)ë¥¼ í™•ì¸í•˜ëŠ” ë¬¸ì œ
ì¡°ê±´ :
100000 - 999999 ì‚¬ì´ì˜ ë²ˆí˜¸ì—¬ì•¼ í•œë‹¤
í•˜ë‚˜ ì´ìƒì˜ alternating repetitive digit pair ê°€ ì—†ì–´ì•¼í•œë‹¤
(alternating repetitive digitë€, ìˆ«ì í•˜ë‚˜ ê±´ë„ˆ ë˜‘ê°™ì€ ìˆ«ìê°€ ë‚˜ì˜¤ëŠ” ê²ƒì„ ë§í•œë‹¤)
ì˜ˆì œ :
523563 # ì—¬ê¸°ì„œëŠ” alternating repetitive digitì´ ì—†ë‹¤
552523 # ì—¬ê¸°ì„œëŠ” ìˆ«ì 2ì™€ 5ê°€ alternating repetitive digitsì— í•´ë‹¹í•œë‹¤
{% endnote %}

{% tabs example8, -1 %}

  <!-- tab INPUT @code -->

110000

  <!-- endtab -->

  <!-- tab OUTPUT @code -->

False

  <!-- endtab -->

{% endtabs %}

{% note success no-icon %}
ì •ê·œí‘œí˜„ì‹ì˜ ì‹œì‘ê³¼ ëì„ ì •í™•íˆ ëª…ì‹œí•´ ì¤˜ì•¼í•œë‹¤! `^ $`ë¥¼ ëª…ì‹œí•˜ì§€ ì•Šìœ¼ë©´ 6ìë¦¬ë¥¼ ë„˜ì–´ê°€ëŠ” ë²ˆí˜¸ë„ ìœ íš¨í•˜ë‹¤ê³  ì²˜ë¦¬í•œë‹¤
{% code lang:python %}
regex_integer_in_range = r"^[1-9]\d{5}$"
regex_alternating_repetitive_digit_pair = r"(\d)(?=\d\1)"

import re
P = input()

print (bool(re.match(regex_integer_in_range, P))
and len(re.findall(regex_alternating_repetitive_digit_pair, P)) < 2) {% endcode %}
{% endnote %}

---

## Matrix Script

</br>

{% note info %}
ë¬¸ì œ : í–‰ë ¬ë¡œ ì•”í˜¸ê°€ ì£¼ì–´ì¡Œì„ ë•Œ ì´ë¥¼ í•´ë…í•˜ëŠ” ë¬¸ì œ
í•´ë… ë°©ë²• : í–‰ìœ¼ë¡œ ì½ì–´ê°€ë©° ì˜ë¬¸ìë§Œ ê°€ì ¸ì˜¨ë‹¤
![matrix](https://s3.amazonaws.com/hr-challenge-images/12524/1442753362-1075bd12d9-Capture.JPG)
{% endnote %}

{% tabs example9, -1 %}

  <!-- tab INPUT @code -->

{% code input %}
7 3
Tsi
h%x
i #
sM
$a
#t%
ir! {% endcode %}

  <!-- endtab -->

  <!-- tab OUTPUT @code -->

{% code output %}This is Matrix# %!{% endcode %}

  <!-- endtab -->

{% endtabs %}

{% note success no-icon %}
ë¬¸ìì™€ ë¬¸ì ì‚¬ì´ì— íŠ¹ìˆ˜ë¬¸ìê°€ ìˆìœ¼ë©´ ' 'ìœ¼ë¡œ ì¹˜í™˜í•˜ë©´ ëœë‹¤
{% code lang:python %}
import re

regex = re.compile(r'(?<=\w)(\W+)(?=\w)')
N, M = (int(num) for num in input().split())
encoded = [input() for _ in range(N)]
decoded = ''.join(row[letter] for letter in range(M) for row in encoded)
print(regex.sub(' ', decoded)) {% endcode %}
{% endnote %}

{% endnote %}
