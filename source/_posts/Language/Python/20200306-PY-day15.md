---
title: (PYTHON) Day - 15 Itertools(2)
date: 2020-03-06 16:50:48
categories:
  - LANGUAGE ğŸš€
  - PYTHON
  - HACKERRANK
tags: [íŒŒì´ì¬, programming language, python, language]
subtitle: ê¸°ì´ˆë¥¼ íƒ„íƒ„íˆ!
---

# Reference

- ë¬¸ì œ ì¶œì²˜ - [HackerRank](https://www.hackerrank.com/dashboard)
- íŒŒì´ì¬ ì—°ìŠµ - [Practice - Python](https://www.hackerrank.com/domains/python?filters%5Bstatus%5D%5B%5D=unsolved&badge_type=python)

ê°œì¸ì ì¸ ìƒê°ê³¼ ìƒìƒìœ¼ë¡œ ì‘ì„±í•œ ë‚´ìš©ë“¤ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤
ë¬¸ì œë¥¼ í’€ê³  {% label success@ Discussion Tab %}ì„ ì°¸ê³ í•˜ë©° ì½”ë“œ ìŠ¤íƒ€ì¼ì„ ê°œì„ í•˜ë ¤ê³  ë…¸ë ¥í•˜ê³ ì í•©ë‹ˆë‹¤

---

# HackerRank

{% spoiler "HackerRankì˜ Python ì—°ìŠµë¬¸ì œë“¤ì€ ì•„ë˜ì™€ ê°™ì€ ì¹´í…Œê³ ë¦¬ë¡œ ë¶„ë¥˜ ëœë‹¤" %}

## Subdomain

    - ~~Introduction~~
    - ~~Basic Data Types~~
    - ~~Strings~~
    - ~~Sets~~
    - ~~Math~~
    - <strong style="color:blue">Itertools</strong>
    - Collections
    - Date and Time
    - Errors and Exceptions
    - Classes
    - Built-Ins
    - Python Functionals
    - Regex and Parsing
    - XML
    - Closures and Decorators
    - Numpy
    - Debugging

{% endspoiler %}

---

# Itertools

{% note no-icon %}
{% note primary no-icon %}

## Problem

- [itertools.product()](#itertools-product)
- [itertools.permutations()](#itertools-permutations)
- [itertools.combinations()](#itertools-combinations)
- [itertools.combinations_with_replacement()](#itertools-combinations-with-replacement)
- [Compress the String!](#Compress-the-String)
- [Iterables and Iterators](#Iterables-and-Iterators)
- [Maximize It!](#Maximize-It)
  {% endnote %}

---

## itertools.product()

</br>

{% note info %}
ë¬¸ì œ : A, Bì˜ ê³±ì§‘í•©ì„ êµ¬í•˜ëŠ” ë¬¸ì œ
ì…ë ¥ : Aì˜ ì›ì†Œë“¤; Bì˜ ì›ì†Œë“¤;
ì¶œë ¥ : product(A, B)

{% code lang:python %}

> > > # Sample code
> > >
> > > from itertools import product
> > >
> > > print list(product([1,2,3],repeat = 2))
> > > [(1, 1), (1, 2), (1, 3), (2, 1), (2, 2), (2, 3), (3, 1), (3, 2), (3, 3)]
> > >
> > > print list(product([1,2,3],[3,4]))
> > > [(1, 3), (1, 4), (2, 3), (2, 4), (3, 3), (3, 4)]
> > >
> > > A = [[1,2,3],[3,4,5]]
> > > print list(product(\*A))
> > > [(1, 3), (1, 4), (1, 5), (2, 3), (2, 4), (2, 5), (3, 3), (3, 4), (3, 5)]
> > >
> > > B = [[1,2,3],[3,4,5],[7,8]]
> > > print list(product(\*B))
> > > [(1, 3, 7), (1, 3, 8), (1, 4, 7), (1, 4, 8), (1, 5, 7), (1, 5, 8), (2, 3, 7), (2, 3, 8), (2, 4, 7), (2, 4, 8), (2, 5, 7), (2, 5, 8), (3, 3, 7), (3, 3, 8), (3, 4, 7), (3, 4, 8), (3, 5, 7), (3, 5, 8)] {% endcode %}
> > > {% endnote %}

{% tabs example1, -1 %}

  <!-- tab INPUT @code -->

1 2
3 4

  <!-- endtab -->

  <!-- tab OUTPUT @code -->

(1, 3) (1, 4) (2, 3) (2, 4)

  <!-- endtab -->

{% endtabs %}

{% note success no-icon %}
{% code lang:python %}
from itertools import product

A = [int(a) for a in input().split()]
B = [int(b) for b in input().split()]

print(\*product(A, B)) {% endcode %}
{% endnote %}

---

## itertools.permutations()

</br>

{% note info %}
ë¬¸ì œ : ë¬¸ìì—´ Sê°€ ì£¼ì–´ì¡Œì„ ë•Œ kì˜ í¬ê¸°ë¡œ ë½‘ì„ ìˆ˜ ìˆëŠ” ìˆœì—´(permutation)ì„ ì‚¬ì „ìˆœ(lexicographic order)ìœ¼ë¡œ ì¶œë ¥í•˜ëŠ” ë¬¸ì œ
ì…ë ¥ : S, k; (ë¬¸ìì—´ì€ ëª¨ë‘ ëŒ€ë¬¸ì)
ì¶œë ¥ : Së¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ìˆœì—´ì„ í•œì¤„ì”© ì¶œë ¥

{% code lang:python %}

> > > # Sample code
> > >
> > > from itertools import permutations
> > > print permutations(['1','2','3'])
> > > <itertools.permutations object at 0x02A45210>
> > >
> > > print list(permutations(['1','2','3']))
> > > [('1', '2', '3'), ('1', '3', '2'), ('2', '1', '3'), ('2', '3', '1'), ('3', '1', '2'), ('3', '2', '1')]
> > >
> > > print list(permutations(['1','2','3'],2))
> > > [('1', '2'), ('1', '3'), ('2', '1'), ('2', '3'), ('3', '1'), ('3', '2')]
> > >
> > > print list(permutations('abc',3))
> > > [('a', 'b', 'c'), ('a', 'c', 'b'), ('b', 'a', 'c'), ('b', 'c', 'a'), ('c', 'a', 'b'), ('c', 'b', 'a')] {% endcode %}
> > > {% endnote %}

{% tabs example2, -1 %}

  <!-- tab INPUT @code -->

HACK 2

  <!-- endtab -->

  <!-- tab OUTPUT @code -->

AC
AH
AK
CA
CH
CK
HA
HC
HK
KA
KC
KH

  <!-- endtab -->

{% endtabs %}

{% note success no-icon %}
{% code lang:python %}
from itertools import permutations

S, k = input().split()
print(\*[''.join(p) for p in permutations(sorted(S), int(k))], sep='\n') {% endcode %}
{% endnote %}

---

## itertools.combinations()

</br>

{% note info %}
ë¬¸ì œ : ë¬¸ìì—´ Sê°€ ì£¼ì–´ì¡Œì„ ë•Œ kì˜ í¬ê¸°ë¡œ ë½‘ì„ ìˆ˜ ìˆëŠ” ì¡°í•©(combination)ì„ ì‚¬ì „ìˆœìœ¼ë¡œ ì¶œë ¥í•˜ëŠ” ë¬¸ì œ
ì…ë ¥ : S, k; (ë¬¸ìì—´ì€ ëª¨ë‘ ëŒ€ë¬¸ì)
ì¶œë ¥ : Së¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì„œë¡œ ë‹¤ë¥¸ ì¡°í•©ì„ í•œì¤„ì”© ì¶œë ¥

{% code lang:python %}

> > > # Sample code
> > >
> > > from itertools import combinations
> > >
> > > print list(combinations('12345',2))
> > > [('1', '2'), ('1', '3'), ('1', '4'), ('1', '5'), ('2', '3'), ('2', '4'), ('2', '5'), ('3', '4'), ('3', '5'), ('4', '5')]
> > >
> > > A = [1,1,3,3,3]
> > > print list(combinations(A,4))
> > > [(1, 1, 3, 3), (1, 1, 3, 3), (1, 1, 3, 3), (1, 3, 3, 3), (1, 3, 3, 3)] {% endcode %}
> > > {% endnote %}

{% tabs example3, -1 %}

  <!-- tab INPUT @code -->

HACK 2

  <!-- endtab -->

  <!-- tab OUTPUT @code -->

A
C
H
K
AC
AH
AK
CH
CK
HK

  <!-- endtab -->

{% endtabs %}

{% note success no-icon %}
{% code lang:python %}
from itertools import combinations

S, k = input().split()
print(\*[''.join(c) for i in range(1, int(k)+1) for c in combinations(sorted(S), i)], sep='\n') {% endcode %}
{% endnote %}

---

## itertools.combinations_with_replacement()

</br>

{% note info %}
ë¬¸ì œ : ë¬¸ìì—´ Sê°€ ì£¼ì–´ì¡Œì„ ë•Œ kì˜ í¬ê¸°ë¡œ ë½‘ì„ ìˆ˜ ìˆëŠ” ì¤‘ë³µì¡°í•©(combinations with replacement)ì„ ì‚¬ì „ìˆœìœ¼ë¡œ ì¶œë ¥í•˜ëŠ” ë¬¸ì œ
ì…ë ¥ : S, k; (ë¬¸ìì—´ì€ ëª¨ë‘ ëŒ€ë¬¸ì)
ì¶œë ¥ : Së¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì¤‘ë³µì¡°í•©ì„ í•œì¤„ì”© ì¶œë ¥

{% code lang:python %}

> > > # Sample code
> > >
> > > from itertools import combinations_with_replacement
> > >
> > > print list(combinations_with_replacement('12345',2))
> > > [('1', '1'), ('1', '2'), ('1', '3'), ('1', '4'), ('1', '5'), ('2', '2'), ('2', '3'), ('2', '4'), ('2', '5'), ('3', '3'), ('3', '4'), ('3', '5'), ('4', '4'), ('4', '5'), ('5', '5')]
> > >
> > > A = [1,1,3,3,3]
> > > print list(combinations(A,2))
> > > [(1, 1), (1, 3), (1, 3), (1, 3), (1, 3), (1, 3), (1, 3), (3, 3), (3, 3), (3, 3)] {% endcode %}
> > > {% endnote %}

{% tabs example4, -1 %}

  <!-- tab INPUT @code -->

HACK 2

  <!-- endtab -->

  <!-- tab OUTPUT @code -->

AA
AC
AH
AK
CC
CH
CK
HH
HK
KK

  <!-- endtab -->

{% endtabs %}

{% note success no-icon %}
{% code lang:python %}
from itertools import combinations_with_replacement

S, k = input().split()

print(\*[''.join(c)for c in combinations_with_replacement(sorted(S), int(k))], sep='\n') {% endcode %}
{% endnote %}

---

## Compress the String!

</br>

{% note info %}
ë¬¸ì œ : ë¬¸ìì—´ Sê°€ ì£¼ì–´ì¡Œì„ ë•Œ ê°™ì€ ë¬¸ìë¼ë¦¬ ê·¸ë£¹ìœ¼ë¡œ ë¬¶ì–´ì„œ ì••ì¶•ëœ í‘œí˜„ì„ ì¶œë ¥í•˜ëŠ” ë¬¸ì œ
ì…ë ¥ : ë¬¸ìì—´ S (ìˆ«ì 0ì—ì„œ 9ê¹Œì§€ë¡œ êµ¬ì„±ë¨)
ì¶œë ¥ : ë¬¸ìë¥¼ cë¡œ ì—°ì†ìœ¼ë¡œ ì¶œí˜„í•œ íšŸìˆ˜ë¥¼ Xë¼ê³  í–ˆì„ ë•Œ (X, c)ë¡œ í‘œí˜„
{% endnote %}

{% tabs example5, -1 %}

  <!-- tab INPUT @code -->

1222311

  <!-- endtab -->

  <!-- tab OUTPUT @code -->

(1, 1) (3, 2) (1, 3) (2, 1)

  <!-- endtab -->

{% endtabs %}

{% note success no-icon %}
íŒŒì´ì¬ì˜ `goupby()` í•¨ìˆ˜ëŠ” SQLì˜ ê°œë…ê³¼ ì¡°ê¸ˆ ë‹¬ë¼ì„œ ì£¼ì˜í•´ì•¼ê² ë‹¤.
ë§Œì•½ SQLì˜ ê·¸ë£¹ë°©ì‹ì„ êµ¬í˜„í•˜ê³  ì‹¶ë‹¤ë©´ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸° ì „ ì •ë ¬ì„ ì‹œì¼œì£¼ë©´ ëœë‹¤.
{% code lang:python %}
from itertools import groupby

S = input()
print(\*[(len(list(grp)), int(key)) for key, grp in groupby(S)]) {% endcode %}
{% endnote %}

---

## Iterables and Iterators

</br>

{% note info %}
ë¬¸ì œ : Nê°œì˜ ì˜ë¬¸ì ì¤‘ì—ì„œ Kê°œë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì¡°í•©ë“¤ ì¤‘ì— 'a'ë¥¼ í¬í•¨í•˜ëŠ” ì¡°í•©ì„ í™•ë¥ ë¡œ ì¶œë ¥í•˜ëŠ” ë¬¸ì œ
ì…ë ¥ : ë¬¸ììˆ˜ N; (Nê°œì˜) ë¬¸ìë“¤; ì¡°í•© í¬ê¸° K;
ì¶œë ¥ : í™•ë¥ ì„ ì†Œìˆ˜ì  3ë²ˆì§¸ ìë¦¬ê¹Œì§€ í‘œí˜„
{% endnote %}

{% tabs example6, -1 %}

  <!-- tab INPUT @code -->

4
a a c d
2

  <!-- endtab -->

  <!-- tab OUTPUT @code -->

0.8333

  <!-- endtab -->

{% endtabs %}

{% note success no-icon %}
`combinations()` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì²´ ê²½ìš°ì˜ ìˆ˜ë¥¼ êµ¬í•˜ê³  ë¬¸ì 'a'ê°€ ìˆëŠ” ì¡°í•©ì˜ ìˆ˜ë¥¼ êµ¬í•¨
`list()`ì™€ `[]`ì˜ ì°¨ì´ì ì„ ì£¼ì˜ - [difference btw list() and \[\]](https://stackoverflow.com/questions/33716401/whats-the-difference-between-list-and)  
 {% code lang:python %}
import itertools as it

N, letters, K = input(), input().split(), int(input())

c_letters = list(it.combinations(letters, K))
contain = [c for c in c_letters if 'a' in c]

print('{:.4f}'.format(len(contain)/len(c_letters))) {% endcode %}
{% endnote %}

{% note default no-icon %}
math ëª¨ë“ˆì„ ì‚¬ìš©í•´ì„œ ì§ì ‘ ìˆ˜í•™ì ì¸ ê³„ì‚°ì„ ì‚¬ìš©í•œ ê²½ìš°ë„ ìˆìŒ
{% code lang:python %}
from math import factorial

def C(n, k):
if n < k:
return 0
return factorial(n) // factorial(n-k)

N = int(input())
n_a = input().split().count('a')
K = int(input())

print('%.4f' % (1 - C(N - n_a, K) / C(N, K))) {% endcode %}

ìˆ˜í–‰ì‹œê°„ì„ ë¹„êµí•´ë³´ë©´ ê·¸ ì°¨ì´ê°€ ë§¤ìš° ì‚¬ì†Œí•˜ê¸° ë•Œë¬¸ì— `combinations()` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ ì§ê´€ì ìœ¼ë¡œ ë³´ê¸° ì¢‹ì€ ê²ƒ ê°™ìŒ
{% code lang:python %}
import itertools as it
from math import factorial
from timeit import timeit

def C(n, k):
if n < k:
return 0
return factorial(n) // factorial(n-k)

N, letters, K = int(input()), input().split(), int(input())

n_a = letters.count('a')

c_letters = list(it.combinations(letters, K))
contain = [c for c in c_letters if 'a' in c]

print(timeit('{:.4f}'.format(len(contain)/len(c_letters)))) # 0.01438812300000003
print(timeit('{:.4f}'.format(1 - C(N - n_a, K) / C(N, K)))) # 0.011570051000000081 {% endcode %}
{% endnote %}

---

## Maximize It!

</br>

{% note info %}
ë¬¸ì œ : f(x) = x^2 ì´ê³ , S = (f(x1) + f(x2) + ...) % M ì¼ ë•Œ, ê°€ì¥ í° Së¥¼ êµ¬í•˜ëŠ” ë¬¸ì œ
ì…ë ¥ : K, M; (Kë²ˆ ë°˜ë³µ) ë¦¬ìŠ¤íŠ¸ì˜ í¬ê¸°, ìˆ«ìë“¤...;
ì¶œë ¥(ì˜ˆì œ) : ê° ë¦¬ìŠ¤íŠ¸ì—ì„œ 5, 9, 10ì„ ë½‘ì€ ê²½ìš° (5^2 + 9^2 + 10^2)%1000 = 206ìœ¼ë¡œ ê°€ì¥ í¬ë‹¤
{% endnote %}

{% tabs example7, -1 %}

  <!-- tab INPUT @code -->

3 1000
2 5 4
3 7 8 9
5 5 7 8 9 10

  <!-- endtab -->

  <!-- tab OUTPUT @code -->

206

  <!-- endtab -->

{% endtabs %}

{% note danger no-icon %}
ì²˜ìŒì— ë¬¸ì œë¥¼ ì˜ëª» ì´í•´í•˜ê³  ê° ë¦¬ìŠ¤íŠ¸ì—ì„œ ê°€ì¥ í° ìˆ˜ë¥¼ ë½‘ì•„ì„œ Së¥¼ êµ¬í•˜ëŠ” ë¬¸ì œì¸ì¤„ ì•Œì•˜ë‹¤...
{% code lang:python %}
K, M = map(int, input().split())
N = [[int(num) for num in input().split()[1:]] for \_ in range(K)]
max_N = list(map(lambda x: max(x)\*\*2, N))

print(sum(max_N) % M) {% endcode %}
{% endnote %}

{% note success no-icon %}
ê° ë¦¬ìŠ¤íŠ¸ë¥¼ ê³±í•˜ì—¬(product) ëª¨ë“  ì¡°í•©ì„ ë§Œë“¤ê³ , ëŒë‹¤ì‹ì„ ì´ìš©í•´ ê° ì¡°í•©ì˜ Së¥¼ ê³„ì‚°í•˜ì—¬ ìµœëŒ€ê°’ì„ êµ¬í•œë‹¤.
{% code lang:python %}
from itertools import product

K, M = map(int, input().split())
N = [[int(num) for num in input().split()[1:]] for \_ in range(K)]
max_S = max(list(map(lambda x: sum(i\**2 for i in x) % M, product(*N))))

print(max_S) {% endcode %}
{% endnote %}

{% endnote %}

---

---
